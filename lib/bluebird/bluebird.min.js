/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2014 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:</p>
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
/**
 * bluebird build version 2.6.3
 * Features enabled: core
 * Features disabled: race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, progress, cancel, using, filter, any, each, timers
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Promise=t()}}(function(){var t,e,r;return function i(t,e,r){function n(s,a){if(!e[s]){if(!t[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=e[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return n(r?r:e)},l,l.exports,i,t,e,r)}return e[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e){"use strict";function r(t){try{Promise===t&&(Promise=i)}catch(e){}return t}var i;"undefined"!=typeof Promise&&(i=Promise),e.exports=t("./promise.js")(),e.exports.noConflict=r},{"./promise.js":11}],2:[function(t,e){"use strict";function r(){this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16);var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=n.isStatic?n(this.drainQueues):n}var i=new Error,n=t("./schedule.js"),o=t("./queue.js"),s="undefined"!=typeof process?process:void 0;r.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},r.prototype._withDomain=function(t){return void 0===s||null==s.domain||t.domain||(t=s.domain.bind(t)),t},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),t=this._withDomain(t),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(r){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},r.prototype.invokeLater=function(t,e,r){t=this._withDomain(t),this._lateQueue.push(t,e,r),this._queueTick()},r.prototype.invokeFirst=function(t,e,r){t=this._withDomain(t),this._normalQueue.unshift(t,e,r),this._queueTick()},r.prototype.invoke=function(t,e,r){t=this._withDomain(t),this._normalQueue.push(t,e,r),this._queueTick()},r.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var r=t.shift(),i=t.shift();e.call(r,i)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},e.exports=new r,e.exports.firstLineError=i},{"./queue.js":14,"./schedule.js":15}],3:[function(t,e){"use strict";e.exports=function(){function e(t){this._parent=t,h(this,e)}function r(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t.toString();var r=/\[object [a-zA-Z0-9$_]+\]/;if(r.test(e))try{var n=JSON.stringify(t);e=n}catch(o){}0===e.length&&(e="(empty array)")}return"(<"+i(e)+">, no stack trace)"}function i(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function n(t){var e=t.match(l);return e?{fileName:e[1],line:parseInt(e[2],10)}:void 0}var o=t("./util.js").inherits,s=t("./es5.js").defineProperty,a=null,c=null;o(e,Error),e.prototype.parent=function(){return this._parent},e.prototype.setParent=function(t){t!==this&&(this._parent=t)},e.prototype.hasParent=function(){return void 0!==this._parent},e.prototype.attachExtraTrace=function(t){var e=this,r=t.stack;r="string"==typeof r?r.split("\n"):[],this.protectErrorMessageNewlines(r);var i=1,n=1;do r=e.combine(r),n++;while(null!=(e=e.parent()));var o=Error.stackTraceLimit||10,s=(o+i)*n,a=r.length;a>s&&(r.length=s),a>0&&(r[0]=r[0].split("\x00").join("\n")),t.stack=r.length<=i?"(No stack trace)":r.join("\n")},e.prototype.combine=function(t){for(var e=this.stack.split("\n"),r=t.length-1,i=t[r],n=-1,o=e.length-1;o>=0;--o)if(e[o]===i){n=o;break}for(var o=n;o>=0;--o){var s=e[o];if(t[r]!==s)break;t.pop(),r--}t.push("From previous event:");for(var c=t.concat(e),l=[],o=0,h=c.length;h>o;++o)a.test(c[o])&&u(c[o])||o>0&&!a.test(c[o])&&"From previous event:"!==c[o]||l.push(c[o]);return l},e.prototype.protectErrorMessageNewlines=function(t){for(var e=0;e<t.length&&!a.test(t[e]);++e);if(!(1>=e)){for(var r=[],i=0;e>i;++i)r.push(t.shift());t.unshift(r.join("\x00"))}},e.formatAndLogError=function(t,e){if("object"==typeof console){var r;if("object"==typeof t||"function"==typeof t){var i=t.stack;r=e+c(i,t)}else r=e+String(t);"function"==typeof console.warn||"object"==typeof console.warn?console.warn(r):("function"==typeof console.log||"object"==typeof console.log)&&console.log(r)}},e.unhandledRejection=function(t){e.formatAndLogError(t,"^--- With additional stack trace: ")},e.possiblyUnhandledRejection=function(t){e.formatAndLogError(t,"Possibly unhandled ")},e.isSupported=function(){return"function"==typeof h};var u=function(){return!1},l=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;e.setBounds=function(t,r){if(e.isSupported()){for(var i,o,s=t.stack.split("\n"),a=r.stack.split("\n"),c=-1,l=-1,h=0;h<s.length;++h){var p=n(s[h]);if(p){i=p.fileName,c=p.line;break}}for(var h=0;h<a.length;++h){var p=n(a[h]);if(p){o=p.fileName,l=p.line;break}}0>c||0>l||!i||!o||i!==o||c>=l||(u=function(t){var e=n(t);return e&&e.fileName===i&&c<=e.line&&e.line<=l?!0:!1})}};var h=function p(){if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){a=/^\s*at\s*/,c=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.name+". "+e.message:r(e)};var t=Error.captureStackTrace,e=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo)/;return u=function(t){return e.test(t)},function(e,r){t(e,r)}}var i=new Error;if("string"==typeof i.stack&&"function"==typeof"".startsWith&&i.stack.startsWith("stackDetection@")&&"stackDetection"===p.name){s(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25}),a=/@/;var n=/[@\n]/;return c=function(t,e){return"string"==typeof t?e.name+". "+e.message+"\n"+t:void 0!==e.name&&void 0!==e.message?e.name+". "+e.message:r(e)},function(t){for(var e=(new Error).stack,r=e.split(n),i=r.length,o="",s=0;i>s;s+=2)o+=r[s],o+="@",o+=r[s+1],o+="\n";t.stack=o}}return c=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?r(e):e.name+". "+e.message},null}();return e}},{"./es5.js":8,"./util.js":18}],4:[function(t,e){"use strict";e.exports=function(e){function r(t,e,r){this._instances=t,this._callback=e,this._promise=r}function i(t,e){var r={},i=s(t,r,e);if(i===a)return i;var n=c(r);return n.length?(a.e=new u("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),a):i}var n=t("./util.js"),o=t("./errors.js"),s=n.tryCatch1,a=n.errorObj,c=t("./es5.js").keys,u=o.TypeError;return r.prototype.doFilter=function(t){for(var r=this._callback,c=this._promise,u=c._boundTo,l=0,h=this._instances.length;h>l;++l){var p=this._instances[l],f=p===Error||null!=p&&p.prototype instanceof Error;if(f&&t instanceof p){var _=s(r,u,t);return _===a?(e.e=_.e,e):_}if("function"==typeof p&&!f){var d=i(p,t);if(d===a){var v=o.canAttachTrace(a.e)?a.e:new Error(n.toString(a.e));this._promise._attachExtraTrace(v),t=a.e;break}if(d){var _=s(r,u,t);return _===a?(e.e=_.e,e):_}}}return e.e=t,e},r}},{"./errors.js":6,"./es5.js":8,"./util.js":18}],5:[function(t,e){"use strict";var r=t("./util.js"),i=r.isPrimitive,n=r.wrapsPrimitiveReceiver;e.exports=function(t){var e=function(){return this},r=function(){throw this},o=function(t,e){return 1===e?function(){throw t}:2===e?function(){return t}:void 0};t.prototype["return"]=t.prototype.thenReturn=function(t){return n&&i(t)?this._then(o(t,2),void 0,void 0,void 0,void 0):this._then(e,void 0,void 0,t,void 0)},t.prototype["throw"]=t.prototype.thenThrow=function(t){return n&&i(t)?this._then(o(t,1),void 0,void 0,void 0,void 0):this._then(r,void 0,void 0,t,void 0)}}},{"./util.js":18}],6:[function(t,e){"use strict";function r(t){try{_(t,"isOperational",!0)}catch(e){}}function i(t){return null==t?!1:t instanceof a||t.isOperational===!0}function n(t){return t instanceof Error}function o(t){return n(t)&&h(t,"stack")}function s(t,e){function r(i){return this instanceof r?(_(this,"message","string"==typeof i?i:e),_(this,"name",t),void(Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new r(i)}return f(r,Error),r}function a(t){_(this,"name","OperationalError"),_(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(_(this,"message",t.message),_(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var c,u,l=t("./es5.js").freeze,h=t("./es5.js").propertyIsWritable,p=t("./util.js"),f=p.inherits,_=p.notEnumerableProp,d=s("CancellationError","cancellation error"),v=s("TimeoutError","timeout error"),y=s("AggregateError","aggregate error");try{c=TypeError,u=RangeError}catch(g){c=s("TypeError","type error"),u=s("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),j=0;j<m.length;++j)"function"==typeof Array.prototype[m[j]]&&(y.prototype[m[j]]=Array.prototype[m[j]]);y.prototype.length=0,y.prototype.isOperational=!0;var b=0;y.prototype.toString=function(){var t=Array(4*b+1).join(" "),e="\n"+t+"AggregateError of:\n";b++,t=Array(4*b+1).join(" ");for(var r=0;r<this.length;++r){for(var i=this[r]===this?"[Circular AggregateError]":this[r]+"",n=i.split("\n"),o=0;o<n.length;++o)n[o]=t+n[o];i=n.join("\n"),e+=i+"\n"}return b--,e},f(a,Error);var w="__BluebirdErrorTypes__",E=Error[w];E||(E=l({CancellationError:d,TimeoutError:v,OperationalError:a,RejectionError:a,AggregateError:y}),_(Error,w,E)),e.exports={Error:Error,TypeError:c,RangeError:u,CancellationError:E.CancellationError,OperationalError:E.OperationalError,TimeoutError:E.TimeoutError,AggregateError:E.AggregateError,originatesFromRejection:i,markAsOriginatingFromRejection:r,canAttachTrace:o}},{"./es5.js":8,"./util.js":18}],7:[function(t,e){"use strict";e.exports=function(e){function r(t){var r=new i(t),n=e.rejected(r),o=n._peekContext();return null!=o&&o.attachExtraTrace(r),n}var i=t("./errors.js").TypeError;return r}},{"./errors.js":6}],8:[function(t,e){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,n={}.toString,o={}.constructor.prototype,s=function(t){var e=[];for(var r in t)i.call(t,r)&&e.push(r);return e},a=function(t,e,r){return t[e]=r.value,t},c=function(t){return t},u=function(t){try{return Object(t).constructor.prototype}catch(e){return o}},l=function(t){try{return"[object Array]"===n.call(t)}catch(e){return!1}};e.exports={isArray:l,keys:s,defineProperty:a,freeze:c,getPrototypeOf:u,isES5:r,propertyIsWritable:function(){return!0}}}},{}],9:[function(t,e){"use strict";e.exports=function(e,r,i){function n(){return this}function o(){throw this}function s(t){return function(){return t}}function a(t){return function(){throw t}}function c(t,e,r){var i;return i=p&&f(e)?r?s(e):a(e):r?n:o,t._then(i,_,void 0,e,void 0)}function u(t){var n=this.promise,o=this.handler,s=n._isBound()?o.call(n._boundTo):o();if(void 0!==s){var a=i(s,void 0);if(a instanceof e)return a=a._target(),c(a,t,n.isFulfilled())}return n.isRejected()?(r.e=t,r):t}function l(t){var r=this.promise,n=this.handler,o=r._isBound()?n.call(r._boundTo,t):n(t);if(void 0!==o){var s=i(o,void 0);if(s instanceof e)return s=s._target(),c(s,t,!0)}return t}var h=t("./util.js"),p=h.wrapsPrimitiveReceiver,f=h.isPrimitive,_=h.thrower;e.prototype._passThroughHandler=function(t,e){if("function"!=typeof t)return this.then();var r={promise:this,handler:t};return this._then(e?u:l,e?u:void 0,void 0,r,void 0)},e.prototype.lastly=e.prototype["finally"]=function(t){return this._passThroughHandler(t,!0)},e.prototype.tap=function(t){return this._passThroughHandler(t,!1)}}},{"./util.js":18}],10:[function(t,e){"use strict";e.exports=function(e,r,i,n){function o(t){this._reject(t)}var s=t("./util.js"),a=s.canEvaluate,c=s.tryCatch1,u=s.errorObj;if(a){for(var l=function(t){return new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))},h=function(t){for(var e=[],r=1;t>=r;++r)e.push("holder.p"+r);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,e.join(", ")))},p=[],f=[void 0],_=1;5>=_;++_)p.push(l(_)),f.push(h(_));var d=function(t,e){this.p1=this.p2=this.p3=this.p4=this.p5=null,this.fn=e,this.total=t,this.now=0};d.prototype.callers=f,d.prototype.checkFulfillment=function(t){var e=this.now;e++;var r=this.total;if(e>=r){var i=this.callers[r],n=c(i,void 0,this);n===u?t._rejectUnchecked(n.e):t._tryFollow(n)||t._fulfillUnchecked(n)}else this.now=e}}e.join=function(){var t,s=arguments.length-1;if(s>0&&"function"==typeof arguments[s]&&(t=arguments[s],6>s&&a)){var c=new e(n);c._setTrace(void 0);for(var u=new d(s,t),l=p,h=0;s>h;++h){var f=i(arguments[h],void 0);f instanceof e?(f=f._target(),f._isPending()?f._then(l[h],o,void 0,c,u):f._isFulfilled()?l[h].call(c,f._value(),u):(c._reject(f._reason()),f._unsetRejectionIsUnhandled())):l[h].call(c,f,u)}return c}for(var _=arguments.length,v=new Array(_),y=0;_>y;++y)v[y]=arguments[y];var c=new r(v).promise();return void 0!==t?c.spread(t):c}}},{"./util.js":18}],11:[function(t,e){"use strict";e.exports=function(){function e(t){if("function"!=typeof t)throw new w("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==e)throw new w("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,this._boundTo=void 0,t!==c&&this._resolveFromResolver(t)}var r,i=function(){return new w("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},n=function(){return new e.PromiseInspection(this._target())},o=t("./util.js"),s=t("./async.js"),a=t("./errors.js"),c=function(){},u={},l={e:null},h=t("./thenables.js")(e,c),p=t("./promise_array.js")(e,c,h),f=t("./captured_trace.js")(),_=t("./catch_filter.js")(l),d=t("./promise_resolver.js"),v=o.isArray,y=o.errorObj,g=o.tryCatch1,m=o.tryCatch2,j=o.tryCatchApply,b=a.RangeError,w=a.TypeError,E=a.CancellationError,k=a.TimeoutError,F=a.OperationalError,T=a.originatesFromRejection,R=a.markAsOriginatingFromRejection,S=a.canAttachTrace,P=t("./errors_api_rejection")(e),O=!1||!("undefined"==typeof process||"string"!=typeof process.execPath||"object"!=typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);e.prototype.bind=function(t){var r=h(t,this),i=new e(c);i._propagateFrom(this,3);var n=this._target();return r instanceof e?(n._then(c,i._reject,i._progress,i,null),r._then(function(t){i._isPending()&&(i._setBoundTo(t),i._follow(n))},i._reject,i._progress,i,null)):(i._setBoundTo(t),i._follow(n)),i},e.prototype.toString=function(){return"[object Promise]"},e.prototype.caught=e.prototype["catch"]=function(t){var r=arguments.length;if(r>1){var i,n=new Array(r-1),o=0;for(i=0;r-1>i;++i){var s=arguments[i];if("function"!=typeof s){var a=new w("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n");return this._attachExtraTrace(a),e.reject(a)}n[o++]=s}n.length=o,t=arguments[i],this._resetTrace();var c=new _(n,t,this);return this._then(void 0,c.doFilter,void 0,c,void 0)}return this._then(void 0,t,void 0,void 0,void 0)},e.prototype.reflect=function(){return this._then(n,n,void 0,this,void 0)},e.prototype.then=function(t,e,r){return this._then(t,e,r,void 0,void 0)},e.prototype.done=function(t,e,r){var i=this._then(t,e,r,void 0,void 0);i._setIsFinal()},e.prototype.spread=function(t,e){var r=this._target(),i=r._isSpreadable()?r===this?this:this.then():this.all();return i._then(t,e,void 0,u,void 0)},e.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},e.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},e.prototype.all=function(){var t=new p(this).promise();return t._setIsSpreadable(),t},e.prototype.error=function(t){return this.caught(T,t)},e.is=function(t){return t instanceof e},e.all=function(t){var e=new p(t).promise();return e._setIsSpreadable(),e},e.method=function(t){if("function"!=typeof t)throw new w("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var r;switch(arguments.length){case 0:r=g(t,this,void 0);break;case 1:r=g(t,this,arguments[0]);break;case 2:r=m(t,this,arguments[0],arguments[1]);break;default:for(var i=arguments.length,n=new Array(i),o=0;i>o;++o)n[o]=arguments[o];r=j(t,n,this)}var s=new e(c);return s._setTrace(void 0),s._resolveFromSyncValue(r),s}},e.attempt=e["try"]=function(t,r,i){if("function"!=typeof t)return P("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var n=v(r)?j(t,r,i):g(t,i,r),o=new e(c);return o._setTrace(void 0),o._resolveFromSyncValue(n),o},e.defer=e.pending=function(){var t=new e(c);return t._setTrace(void 0),new d(t)},e.bind=function(t){var r=h(t,void 0),i=new e(c);return i._setTrace(void 0),r instanceof e?r._then(function(t){i._setBoundTo(t),i._fulfill(void 0)},i._reject,i._progress,i,null):(i._setBoundTo(t),i._setFulfilled()),i},e.cast=function(t){var r=h(t,void 0);if(!(r instanceof e)){var i=r;r=new e(c),r._setTrace(void 0),r._setFulfilled(),r._settledValue=i,r._cleanValues()}return r},e.resolve=e.fulfilled=e.cast,e.reject=e.rejected=function(t){var r=new e(c);if(r._setTrace(void 0),R(t),r._setRejected(),r._settledValue=t,r._cleanValues(),!S(t)){var i=new Error(o.toString(t));r._setCarriedStackTrace(i)}return r._ensurePossibleRejectionHandled(),r},e.onPossiblyUnhandledRejection=function(t){f.possiblyUnhandledRejection="function"==typeof t?t:void 0},e.onUnhandledRejectionHandled=function(t){r="function"==typeof t?t:void 0},e.longStackTraces=function(){if(s.haveItemsQueued()&&O===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");O=f.isSupported()},e.hasLongStackTraces=function(){return O&&f.isSupported()},e.setScheduler=function(t){if("function"!=typeof t)throw new w("fn must be a function\n\n    See http://goo.gl/916lJJ\n");s._schedule=t},e.prototype._then=function(t,r,i,n,o){var a=void 0!==o,u=a?o:new e(c);a||u._propagateFrom(this,7);var l=this._target();l!==this&&(void 0===n&&(n=this._boundTo),a||u._setIsMigrated());var h=l._addCallbacks(t,r,i,u,n);return l._isResolved()&&!l._isSettlePromisesQueued()&&s.invoke(l._settlePromiseAtPostResolution,l,h),u},e.prototype._settlePromiseAtPostResolution=function(t){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(t)},e.prototype._length=function(){return 131071&this._bitField},e.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},e.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},e.prototype._setLength=function(t){this._bitField=-131072&this._bitField|131071&t},e.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},e.prototype._setRejected=function(){this._bitField=134217728|this._bitField},e.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},e.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},e.prototype._isFinal=function(){return(33554432&this._bitField)>0},e.prototype._cancellable=function(){return(67108864&this._bitField)>0},e.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},e.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},e.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},e.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},e.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},e.prototype._isSpreadable=function(){return(131072&this._bitField)>0},e.prototype._setIsSpreadable=function(){this._bitField=131072|this._bitField},e.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},e.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},e.prototype._isMigrated=function(){return(4194304&this._bitField)>0},e.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},e.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},e.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},e.prototype._setCarriedStackTrace=function(t){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=t},e.prototype._unsetCarriedStackTrace=function(){this._bitField=-1048577&this._bitField,this._fulfillmentHandler0=void 0},e.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},e.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},e.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[5*t-5+4];return this._isBound()&&void 0===e?this._boundTo:e},e.prototype._promiseAt=function(t){return 0===t?this._promise0:this[5*t-5+3]},e.prototype._fulfillmentHandlerAt=function(t){return 0===t?this._fulfillmentHandler0:this[5*t-5+0]},e.prototype._rejectionHandlerAt=function(t){return 0===t?this._rejectionHandler0:this[5*t-5+1]},e.prototype._migrateCallbacks=function(t,r,i,n,o){n instanceof e&&n._setIsMigrated(),this._addCallbacks(t,r,i,n,o)},e.prototype._addCallbacks=function(t,e,r,i,n){var o=this._length();if(o>=131066&&(o=0,this._setLength(0)),0===o)this._promise0=i,void 0!==n&&(this._receiver0=n),"function"!=typeof t||this._isCarryingStackTrace()||(this._fulfillmentHandler0=t),"function"==typeof e&&(this._rejectionHandler0=e),"function"==typeof r&&(this._progressHandler0=r);else{var s=5*o-5;this[s+3]=i,this[s+4]=n,"function"==typeof t&&(this[s+0]=t),"function"==typeof e&&(this[s+1]=e),"function"==typeof r&&(this[s+2]=r)}return this._setLength(o+1),o},e.prototype._setProxyHandlers=function(t,e){var r=this._length();if(r>=131066&&(r=0,this._setLength(0)),0===r)this._promise0=e,this._receiver0=t;else{var i=5*r-5;this[i+3]=e,this[i+4]=t}this._setLength(r+1)},e.prototype._proxyPromiseArray=function(t,e){this._setProxyHandlers(t,e)},e.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=8388608|this._bitField,this._boundTo=t):this._bitField=-8388609&this._bitField},e.prototype._isBound=function(){return 8388608===(8388608&this._bitField)},e.prototype._resolveFromResolver=function(t){var e=this;this._setTrace(void 0),this._pushContext();var r=m(t,void 0,function(t){e._tryFollow(t)||e._fulfill(t)},function(t){var r=S(t)?t:new Error(o.toString(t));e._attachExtraTrace(r),R(t),e._reject(t,r===t?void 0:r)});if(this._popContext(),void 0!==r&&r===y){var i=r.e,n=S(i)?i:new Error(o.toString(i));e._reject(i,n)}},e.prototype._settlePromiseFromHandler=function(t,r,n,s){if(!s._isRejected()){s._pushContext();var a;if(a=r!==u||this._isRejected()?g(t,r,n):j(t,n,this._boundTo),s._popContext(),a===y||a===s||a===l){var c=a===s?i():a.e,p=S(c)?c:new Error(o.toString(c));a!==l&&s._attachExtraTrace(p),s._rejectUnchecked(c,p)}else if(a=h(a,s),a instanceof e){if(a=a._target(),a._isRejected()&&!a._isCarryingStackTrace()&&!S(a._reason())){var p=new Error(o.toString(a._reason()));s._attachExtraTrace(p),a._setCarriedStackTrace(p)}s._follow(a)}else s._fulfillUnchecked(a)}},e.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},e.prototype._followee=function(){return this._rejectionHandler0},e.prototype._setFollowee=function(t){this._rejectionHandler0=t},e.prototype._follow=function(t){if(t._isPending()){for(var e=this._length(),r=0;e>r;++r)t._migrateCallbacks(this._fulfillmentHandlerAt(r),this._rejectionHandlerAt(r),this._progressHandlerAt(r),this._promiseAt(r),this._receiverAt(r));this._setFollowing(),this._setLength(0),this._setFollowee(t),this._propagateFrom(t,1)}else t._isFulfilled()?this._fulfillUnchecked(t._value()):this._rejectUnchecked(t._reason(),t._getCarriedStackTrace());t._isRejectionUnhandled()&&t._unsetRejectionIsUnhandled(),O&&!t._trace.hasParent()&&t._trace.setParent(this._trace)},e.prototype._tryFollow=function(t){if(this._isFollowingOrFulfilledOrRejected()||t===this)return!1;var r=h(t,this);return r instanceof e?(this._follow(r._target()),!0):!1},e.prototype._resetTrace=function(){O&&(this._trace=new f(this._peekContext()))},e.prototype._setTrace=function(t){if(O){var e=this._peekContext();this._trace=void 0!==t&&t._trace.parent()===e?t._trace:new f(e)}return this},e.prototype._attachExtraTrace=function(t){O&&S(t)&&this._trace.attachExtraTrace(t)},e.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},e.prototype._propagateFrom=function(t,e){(1&e)>0&&t._cancellable()&&(this._setCancellable(),this._cancellationParent=t),(4&e)>0&&this._setBoundTo(t._boundTo),(2&e)>0&&this._setTrace(t)},e.prototype._fulfill=function(t){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(t)},e.prototype._reject=function(t,e){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(t,e)},e.prototype._settlePromiseAt=function(t){var r=this._promiseAt(t),i=r instanceof e;if(i&&r._isMigrated())return r._unsetIsMigrated(),s.invoke(this._settlePromiseAt,this,t);var n=this._isFulfilled()?this._fulfillmentHandlerAt(t):this._rejectionHandlerAt(t),o=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,a=this._settledValue,c=this._receiverAt(t);this._clearCallbackDataAtIndex(t),"function"==typeof n?i?this._settlePromiseFromHandler(n,c,a,r):n.call(c,a,r):c instanceof p?c._isResolved()||(this._isFulfilled()?c._promiseFulfilled(a,r):c._promiseRejected(a,r)):i&&(this._isFulfilled()?r._fulfill(a):r._reject(a,o)),t>=4&&4===(31&t)&&s.invokeLater(this._setLength,this,0)},e.prototype._clearCallbackDataAtIndex=function(t){if(0===t)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var e=5*t-5;this[e+3]=this[e+4]=this[e+0]=this[e+1]=this[e+2]=void 0}},e.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},e.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},e.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},e.prototype._queueSettlePromises=function(){this._isSettlePromisesQueued()||(s.settlePromises(this),this._setSettlePromisesQueued())},e.prototype._fulfillUnchecked=function(t){if(t===this){var e=i();return this._attachExtraTrace(e),this._rejectUnchecked(e,void 0)}this._setFulfilled(),this._settledValue=t,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},e.prototype._rejectUncheckedCheckError=function(t){var e=S(t)?t:new Error(o.toString(t));this._rejectUnchecked(t,e===t?void 0:e)},e.prototype._rejectUnchecked=function(t,e){if(t===this){var r=i();return this._attachExtraTrace(r),this._rejectUnchecked(r)}return this._setRejected(),this._settledValue=t,this._cleanValues(),this._isFinal()?void s.throwLater(function(t){throw"stack"in t&&s.invokeFirst(f.unhandledRejection,void 0,t),t},void 0===e?t:e):(void 0!==e&&this._setCarriedStackTrace(e),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},e.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var t=this._length(),e=0;t>e;e++)this._settlePromiseAt(e)},e.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled(),void 0!==f.possiblyUnhandledRejection&&s.invokeLater(this._notifyUnhandledRejection,this,void 0)},e.prototype._notifyUnhandledRejectionIsHandled=function(){"function"==typeof r&&s.throwLater(r,this)},e.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue,e=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified(),void 0!==e&&(this._unsetCarriedStackTrace(),t=e),"function"==typeof f.possiblyUnhandledRejection&&f.possiblyUnhandledRejection(t,this)}};var C=[];return e.prototype._peekContext=function(){var t=C.length-1;return t>=0?C[t]:void 0},e.prototype._pushContext=function(){O&&C.push(this._trace)},e.prototype._popContext=function(){O&&C.pop()},e.prototype._resolveFromSyncValue=function(t){if(t===y){this._setRejected();var r=t.e;this._settledValue=r,this._cleanValues(),this._attachExtraTrace(r),this._ensurePossibleRejectionHandled()}else{var i=h(t,this);i instanceof e?(i=i._target(),this._follow(i)):(this._setFulfilled(),this._settledValue=t,this._cleanValues())}},f.isSupported()||(e.longStackTraces=function(){},O=!1),e._makeSelfResolutionError=i,t("./finally.js")(e,l,h),t("./direct_resolve.js")(e),t("./synchronous_inspection.js")(e),t("./join.js")(e,p,h,c),e.RangeError=b,e.CancellationError=E,e.TimeoutError=k,e.TypeError=w,e.OperationalError=F,e.RejectionError=F,e.AggregateError=a.AggregateError,o.toFastProperties(e),o.toFastProperties(e.prototype),e.Promise=e,f.setBounds(s.firstLineError,o.lastLineError),e.prototype=e.prototype,e}},{"./async.js":2,"./captured_trace.js":3,"./catch_filter.js":4,"./direct_resolve.js":5,"./errors.js":6,"./errors_api_rejection":7,"./finally.js":9,"./join.js":10,"./promise_array.js":12,"./promise_resolver.js":13,"./synchronous_inspection.js":16,"./thenables.js":17,"./util.js":18}],12:[function(t,e){"use strict";e.exports=function(e,r,i){function n(t){switch(t){case-1:return void 0;case-2:return[];case-3:return{}}}function o(t){var i,n=this._promise=new e(r);t instanceof e&&(i=t,n._propagateFrom(i,5)),n._setTrace(i),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=t("./errors.js").canAttachTrace,a=t("./util.js"),c=a.isArray;return o.prototype.length=function(){return this._length},o.prototype.promise=function(){return this._promise},o.prototype._init=function u(t,r){var o=i(this._values,void 0);if(o instanceof e){if(o._setBoundTo(this._promise._boundTo),o=o._target(),this._values=o,!o._isFulfilled())return o._isPending()?void o._then(u,this._reject,void 0,this,r):(o._unsetRejectionIsUnhandled(),void this._reject(o._reason()));if(o=o._value(),!c(o)){var s=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(s)}}else if(!c(o)){var s=new e.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(s)}if(0===o.length)return void(-5===r?this._resolveEmptyArray():this._resolve(n(r)));var a=this.getActualLength(o.length);this._length=a,this._values=this.shouldCopyValues()?new Array(a):this._values;for(var l=this._promise,h=0;a>h;++h){var p=this._isResolved(),f=i(o[h],l);
f instanceof e?(f=f._target(),p?f._unsetRejectionIsUnhandled():f._isPending()?f._proxyPromiseArray(this,h):f._isFulfilled()?this._promiseFulfilled(f._value(),h):(f._unsetRejectionIsUnhandled(),this._promiseRejected(f._reason(),h))):p||this._promiseFulfilled(f,h)}},o.prototype._isResolved=function(){return null===this._values},o.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},o.prototype.__hardReject__=o.prototype._reject=function(t){this._values=null;var e=s(t)?t:new Error(a.toString(t));this._promise._attachExtraTrace(e),this._promise._reject(t,e)},o.prototype._promiseProgressed=function(t,e){this._promise._progress({index:e,value:t})},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var r=++this._totalResolved;r>=this._length&&this._resolve(this._values)},o.prototype._promiseRejected=function(t){this._totalResolved++,this._reject(t)},o.prototype.shouldCopyValues=function(){return!0},o.prototype.getActualLength=function(t){return t},o}},{"./errors.js":6,"./util.js":18}],13:[function(t,e){"use strict";function r(t){return t instanceof Error&&f.getPrototypeOf(t)===Error.prototype}function i(t){var e;return e=r(t)?new l(t):t,c.markAsOriginatingFromRejection(e),e}function n(t){return t._setIsSpreadable(),function(e,r){if(null!==t){if(e){var n=i(a(e));t._attachExtraTrace(n),t._reject(n)}else if(arguments.length>2){for(var o=arguments.length,s=new Array(o-1),c=1;o>c;++c)s[c-1]=arguments[c];t._fulfill(s)}else t._fulfill(r);t=null}}}var o,s=t("./util.js"),a=s.maybeWrapAsError,c=t("./errors.js"),u=c.TimeoutError,l=c.OperationalError,h=t("./async.js"),p=s.haveGetters,f=t("./es5.js");if(o=p?function(t){this.promise=t}:function(t){this.promise=t,this.asCallback=n(t),this.callback=this.asCallback},p){var _={get:function(){return n(this.promise)}};f.defineProperty(o.prototype,"asCallback",_),f.defineProperty(o.prototype,"callback",_)}o._nodebackForPromise=n,o.prototype.toString=function(){return"[object PromiseResolver]"},o.prototype.resolve=o.prototype.fulfill=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");var e=this.promise;e._tryFollow(t)||h.invoke(e._fulfill,e,t)},o.prototype.reject=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");var e=this.promise;c.markAsOriginatingFromRejection(t);var r=c.canAttachTrace(t)?t:new Error(s.toString(t));e._attachExtraTrace(r),h.invoke(e._reject,e,t),r!==t&&h.invoke(this._setCarriedStackTrace,this,r)},o.prototype.progress=function(t){if(!(this instanceof o))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");h.invoke(this.promise._progress,this.promise,t)},o.prototype.cancel=function(){h.invoke(this.promise.cancel,this.promise,void 0)},o.prototype.timeout=function(){this.reject(new u("timeout"))},o.prototype.isResolved=function(){return this.promise.isResolved()},o.prototype.toJSON=function(){return this.promise.toJSON()},o.prototype._setCarriedStackTrace=function(t){this.promise.isRejected()&&this.promise._setCarriedStackTrace(t)},e.exports=o},{"./async.js":2,"./errors.js":6,"./es5.js":8,"./util.js":18}],14:[function(t,e){"use strict";function r(t,e,r,i,n){for(var o=0;n>o;++o)r[o+i]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var r=this._front,i=(r-1&e-1^e)-e;this[i]=t,this._front=i,this._length=this.length()+1},i.prototype.unshift=function(t,e,r){this._unshiftOne(r),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,r){var i=this.length()+3;if(this._willBeOverCapacity(i))return this._pushOne(t),this._pushOne(e),void this._pushOne(r);var n=this._front+i-3;this._checkCapacity(i);var o=this._capacity-1;this[n+0&o]=t,this[n+1&o]=e,this[n+2&o]=r,this._length=i},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var i=this._front,n=this._length;if(i+n>e){var o=i+n&e-1;r(this,0,this,e,o)}},e.exports=i},{}],15:[function(t,e){"use strict";var r;"object"==typeof process&&"string"==typeof process.version?r=parseInt(process.version.split(".")[1],10)>10?setImmediate:process.nextTick:"undefined"!=typeof MutationObserver?(r=function(t){var e=document.createElement("div"),r=new MutationObserver(t);return r.observe(e,{attributes:!0}),function(){e.classList.toggle("foo")}},r.isStatic=!0):r="undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")},e.exports=r},{}],16:[function(t,e){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValue=t._isResolved()?t._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},e.prototype.isFulfilled=t.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},e.prototype.isRejected=t.prototype._isRejected=function(){return(134217728&this._bitField)>0},e.prototype.isPending=t.prototype._isPending=function(){return 0===(402653184&this._bitField)},e.prototype.isResolved=t.prototype._isResolved=function(){return(402653184&this._bitField)>0},t.prototype.isPending=function(){return this._target()._isPending()},t.prototype.isRejected=function(){return this._target()._isRejected()},t.prototype.isFulfilled=function(){return this._target()._isFulfilled()},t.prototype.isResolved=function(){return this._target()._isResolved()},t.prototype._value=function(){return this._settledValue},t.prototype._reason=function(){return this._settledValue},t.prototype.value=function(){var t=this._target();if(!t.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return t._settledValue},t.prototype.reason=function(){var t=this._target();if(!t.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return t._settledValue},t.PromiseInspection=e}},{}],17:[function(t,e){"use strict";e.exports=function(e,r){function i(t){try{return t.then}catch(e){return u.e=e,u}}function n(t,n){if(l(t)){if(t instanceof e)return t;if(o(t)){var a=new e(r);return a._setTrace(void 0),t._then(a._fulfillUnchecked,a._rejectUncheckedCheckError,a._progressUnchecked,a,null),a}var h=i(t);if(h===u)return void 0!==n&&c(h.e)&&n._attachExtraTrace(h.e),e.reject(h.e);if("function"==typeof h)return s(t,h,n)}return t}function o(t){return h.call(t,"_promise0")}function s(t,r,i){function n(r){if(!l){if(l=!0,t===r){var n=e._makeSelfResolutionError();return void 0!==i&&i._attachExtraTrace(n),void u.promise._reject(n,void 0)}u.resolve(r)}}function o(t){if(!l){l=!0;var e=c(t)?t:new Error(a.toString(t));void 0!==i&&i._attachExtraTrace(e),u.promise._reject(t,e)}}function s(t){if(!l){var e=u.promise;"function"==typeof e._progress&&e._progress(t)}}var u=e.defer(),l=!1;try{r.call(t,n,o,s)}catch(h){if(!l){l=!0;var p=c(h)?h:new Error(a.toString(h));void 0!==i&&i._attachExtraTrace(p),u.promise._reject(h,p)}}return u.promise}var a=t("./util.js"),c=t("./errors.js").canAttachTrace,u=a.errorObj,l=a.isObject,h={}.hasOwnProperty;return n}},{"./errors.js":6,"./util.js":18}],18:[function(t,e,r){"use strict";function i(t,e,r){try{return t.call(e,r)}catch(i){return k.e=i,k}}function n(t,e,r,i){try{return t.call(e,r,i)}catch(n){return k.e=n,k}}function o(t,e,r,i,n){try{return t.call(e,r,i,n)}catch(o){return k.e=o,k}}function s(t,e,r,i,n,o){try{return t.call(e,r,i,n,o)}catch(s){return k.e=s,k}}function a(t,e,r){try{return t.apply(r,e)}catch(i){return k.e=i,k}}function c(t){return"string"==typeof t?t:""+t}function u(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function l(t){return!u(t)}function h(t){return u(t)?new Error(c(t)):t}function p(t,e){var r,i=t.length,n=new Array(i+1);for(r=0;i>r;++r)n[r]=t[r];return n[r]=e,n}function f(t,e,r){if(!b.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var i=Object.getOwnPropertyDescriptor(t,e);return null!=i?null==i.get&&null==i.set?i.value:r:void 0}function _(t,e,r){if(u(t))return t;var i={value:r,configurable:!0,enumerable:!1,writable:!0};return b.defineProperty(t,e,i),t}function d(t){throw t}function v(t){try{if("function"==typeof t){var e=b.keys(t.prototype);return e.length>0&&!(1===e.length&&"constructor"===e[0])}return!1}catch(r){return!1}}function y(t){function e(){}return e.prototype=t,e}function g(t){return S.test(t)}function m(t,e,r){for(var i=new Array(t),n=0;t>n;++n)i[n]=e+n+r;return i}function j(t){try{return t+""}catch(e){return"[no string representation]"}}var b=t("./es5.js"),w=function(){try{var t={};return b.defineProperty(t,"f",{get:function(){return 3}}),3===t.f}catch(e){return!1}}(),E="undefined"==typeof navigator,k={e:{}},F=function(t,e){function r(){this.constructor=t,this.constructor$=e;for(var r in e.prototype)i.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}var i={}.hasOwnProperty;return r.prototype=e.prototype,t.prototype=new r,t.prototype},T=function(){return"string"!==this}.call("string"),R=function(){return b.isES5?function(t,e){for(var r=[],i=Object.create(null),n=Object(e).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=t;){var o;try{o=n(t)}catch(s){return r}for(var a=0;a<o.length;++a){var c=o[a];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(t,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}t=b.getPrototypeOf(t)}return r}:function(t){var e=[];for(var r in t)e.push(r);return e}}(),S=/^[a-z$_][a-z$_0-9]*$/i,P={isClass:v,isIdentifier:g,inheritedDataKeys:R,getDataPropertyOrDefault:f,thrower:d,isArray:b.isArray,haveGetters:w,notEnumerableProp:_,isPrimitive:u,isObject:l,canEvaluate:E,errorObj:k,tryCatch1:i,tryCatch2:n,tryCatch3:o,tryCatch4:s,tryCatchApply:a,inherits:F,withAppended:p,asString:c,maybeWrapAsError:h,wrapsPrimitiveReceiver:T,toFastProperties:y,filledRange:m,toString:j,lastLineError:new Error};e.exports=P},{"./es5.js":8}]},{},[1])(1)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);